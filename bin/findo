#!/usr/bin/env bash

RED='\033[0;31m'
NC='\033[0m'

usage() {
    cat <<EOF
    OPTIONS:
    name   | Name of the string to find.
    -h     | Print this message.
EOF
}

function launch_findo() {
    printf "LOOKING FOR %s\n" "$1"
    for filename in $(ls) $CURRENT_DIR
    do
        #if [ -d $filename ]; then
            #cd $filename
        #else
        if [ -f $filename ]; then
            occ="$(cat -b $filename | grep $1)"
            #if [ ${#occ} ]; then
            #printf "%i" $?
            if ((!$?)); then
                printf "${RED}In the file %s${NC}\n%s\n\n" "$filename" "$occ"
            fi
        fi
    done
}

CURRENT_DIR=$(pwd)
if (( $# >= 1 )); then
    case "$1" in
        -h) usage
            ;;
        *) launch_findo $1
            ;;
    esac
else
    usage && exit 1
fi
