#!/usr/bin/env bash

RED='\033[0;31m'
NC='\033[0m'

usage() {
    cat <<EOF
    findo stands for Find Occurance.
    OPTIONS:
    name   | Name of the string to find.
    -h     | Print this message.
EOF
}

function launch_findo() {
    for filename in $CURRENT_DIR/* $CURRENT_DIR/**/*
    do
        if [ -f $filename ]; then
            occ="$(cat -b $filename | grep $1)"
            #printf "%i" $?
            if ((!$?)); then
                printf "${RED}In the file %s${NC}\n%s\n\n" "$filename" "$occ"
            fi
        #else
        #    cd $filename
        #    launch_findo $1
        #    cd ..
        fi
    done
}

CURRENT_DIR=$(pwd)
if (( $# >= 1 )); then
    case "$1" in
        -h) usage
            ;;
        *)  printf "LOOKING FOR %s\n" "$1"
            launch_findo $1
            ;;
    esac
else
    usage && exit 1
fi
